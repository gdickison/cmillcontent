import Head from 'next/head'
import Link from 'next/link'
import NavBar from '../components/Navbar'
import Footer from '../components/Footer'
import HomeSubheader from '../components/HomeSubheader'
import BrandLogos from '../components/BrandLogos'
import HomeCards from '../components/HomeCards'
import Loader from "../components/Loader"
import { useState, useEffect } from 'react'
import sanityClient from '../src/client'

export default function Home() {
    const [headlineData, setHeadlineData] = useState(null);

    useEffect(() => {
        sanityClient.fetch(`*[_type == "headlineText"] {
            _id,
            headline
        }`)
        .then((data) => setHeadlineData(data));
    }, []);

    return (
        <div className="page-container">
            <Head>
                <title>C.M. Miller Content Writer</title>
                <meta name="description" content="Generated by create next app" />
                <meta name="viewport" content="width=device-width, initial-scale=1" />
                <link rel="icon" href="/images/curtis_miller_logo.png" />
            </Head>

            <NavBar />
            <div className="content-wrapper">
                <div className="home-headerWrapper">
                    <div className="home-headerTextContainer">
                        <h1 className="home-title">
                            C. M. Miller
                        </h1>
                        <p className="home-subtitle">
                            Content Writer
                        </p>
                    </div>
                </div>
                {!headlineData
                    ?
                    <Loader />
                    :
                    headlineData.map((data) => {
                        return (
                            <HomeSubheader key={data._id} subheaderText={data.headline} />
                        )
                    })
                }
                <BrandLogos />
                <HomeCards />
                <div className="putMeToWorkContainer">
                    <Link href="mailto:cmillcontent@gmail.com" passHref>
                        <span className="putMeToWorkButton">Put Me To Work</span>
                    </Link>
                </div>

            </div>

            <Footer id="home-footer" />
        </div>
    )
}
